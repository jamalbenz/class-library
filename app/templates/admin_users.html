{% extends "base.html" %}
{% block content %}

<div class="card" style="max-width:1000px;margin:0 auto;">
  <div style="display:flex;align-items:center;gap:10px;flex-wrap:wrap;">
    <h2 style="margin:0;">ğŸ‘¥ Users</h2>
    <div class="small" style="opacity:.8;">Ù‚Ø¨ÙˆÙ„ / Ø¥Ù„ØºØ§Ø¡ Ù‚Ø¨ÙˆÙ„ Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù…ÙŠÙ†</div>
    <div style="margin-left:auto;" class="small">Logged as: {{ session.email }}</div>
  </div>
</div>

<div style="height:12px"></div>

<div class="card" style="max-width:1000px;margin:0 auto;overflow:auto;">
  <table style="width:100%;border-collapse:collapse;">
    <thead>
      <tr style="text-align:left;border-bottom:1px solid rgba(255,255,255,.08);">
        <th style="padding:10px;">Name</th>
        <th style="padding:10px;">Email</th>
        <th style="padding:10px;">Approved</th>
        <th style="padding:10px;">Approved at</th>
        <th style="padding:10px;">Actions</th>
      </tr>
    </thead>

    <tbody>
      {% for u in users %}
      <tr style="border-bottom:1px solid rgba(255,255,255,.06);">
        <td style="padding:10px;">
          <b>{{ u.full_name or "-" }}</b>
          <div class="small" style="opacity:.7;">ID: {{ u.user_id }}</div>
        </td>

        <td style="padding:10px;">
          {{ u.email or "-" }}
        </td>

        <td style="padding:10px;">
          {% if u.is_approved %}
            <span class="badge ok">âœ… Approved</span>
          {% else %}
            <span class="badge no">â³ Pending</span>
          {% endif %}
        </td>

        <td style="padding:10px;" class="small">
          {{ u.approved_at or "-" }}
        </td>

        <td style="padding:10px;">
          <div style="display:flex;gap:8px;flex-wrap:wrap;">
            {% if not u.is_approved %}
              <form method="post" action="/admin/users/{{ u.user_id }}/approve">
                <button class="btn" type="submit">âœ… Approve</button>
              </form>
            {% else %}
              <form method="post" action="/admin/users/{{ u.user_id }}/unapprove">
                <button class="btn2" type="submit">â›” Unapprove</button>
              </form>
            {% endif %}
          </div>
        </td>
      </tr>
      {% endfor %}
    </tbody>
  </table>

  {% if users|length == 0 %}
    <div style="padding:12px;" class="small">No users found.</div>
  {% endif %}
</div>

{% endblock %}
